- type: entity
  id: CP14ActionSpellLightningBolt
  parent: CP14ActionSpellBase
  name: Thunder bolt
  description: You create a temporary electrifying thunder bolt that can be used as a disposable crossbow projectile.
  components:
  - type: Sprite
    sprite: _CP14/Actions/Spells/electromancy.rsi
    state: thunder_bolt
  - type: CP14MagicEffectManaCost
    manaCost: 15
  - type: CP14MagicEffect
    magicType: Energia
    effects:
    - !type:CP14SpellSpawnEntityOnTarget
      spawns:
      - CP14ElectrifiedEffect
    - !type:CP14SpellSpawnInHandEntity
      spawns:
      - CP14ThunderBolt
  - type: CP14MagicEffectVerbalAspect
    startSpeech: "Sagitta glaciei..."
    endSpeech: "in manu mea"
  - type: CP14MagicEffectSomaticAspect
  - type: CP14MagicEffectCastingVisual
    proto: CP14RuneLightningStrike
  - type: Action
    icon:
      sprite: _CP14/Actions/Spells/electromancy.rsi
      state: thunder_bolt
  - type: InstantAction
    event: !type:CP14DelayedInstantActionEvent
      cooldown: 10
      breakOnMove: false

- type: entity
  id: CP14ThunderBolt
  parent: BaseItem
  name: thunder bolt
  description: An electrifying thunder bolt created with magic. It dissapates and will soon disappear, but you can shoot it once with your crossbow.
  categories: [ ForkFiltered ]
  components:
  - type: Sprite
    sprite: _CP14/Objects/Weapons/Ranged/Projectiles/thunder_bolt.rsi
    state: icon
  - type: Item
    storedRotation: 0
  - type: Fixtures
    fixtures:
      fix1:
        shape: !type:PhysShapeCircle
          radius: 0.2
        density: 5
        mask:
        - ItemMask
        restitution: 0.3
        friction: 0.2
      projectile:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.1,-0.1,0.1,0.1"
        hard: false
        mask:
        - Impassable
        - BulletImpassable
  - type: EmbeddableProjectile
    sound: /Audio/Weapons/star_hit.ogg
    embedOnThrow: false
  - type: ThrowingAngle
    angle: 0
  - type: Ammo
    muzzleFlash: null
  - type: Tag
    tags:
    - CP14Arrow
  - type: Projectile
    deleteOnCollide: false
    onlyCollideWhenShot: true
    damage:
      types:
        Shock: 30
  - !type:CP14StaminaChange
      staminaDelta: -25
  - type: Damageable
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 10
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: TimedDespawn
    lifetime: 240
  - type: DamageOnLand
    damage:
      types:
        Blunt: 10

- type: entity
  parent: CP14BaseSpellScrollWater
  id: CP14SpellScrollIceArrow
  name: ice arrow spell scroll
  components:
  - type: CP14SpellStorage
    spells:
    - CP14ActionSpellIceArrow